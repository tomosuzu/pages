# 継続的インテグレーション

〜コードに対する早いフィードバック〜

## 継続的インテグレーション（CI: continuous integration）とは

ソフトウェアの開発プロセスの中で、定期的、自動的にビルド、テストを実施するプラクティスです。

## なぜ継続的インテグレーションをするのか

### ソフトウェアを常に動く状態になっているのを保証する

ソフトウェアの開発終盤にいきなり統合し、

動かすのはとてもリスキーですし、まともに動かない場合もあるでしょう。

継続的インテグレーションで開発の初期から定期的にビルドを行い、

ソフトウェアを常に動く状態を保ち、それを保証します。

### 品質を作り込む

開発プロセスの中で品質を作り込み、製品にバグを出さないようにするために行います。

開発後にまとめてテストをするのではなく、

開発中から品質を担保することで無駄を無くします。

## どうやっておこなうのか

### 前提条件

自動化されたテストが必要です。

[テスト駆動開発](/practices/test-driven-development)などのプラクティスを使うことで

意識せずとも自動テストをアプリケーションに組み込むことができます。

### CIパイプラインの構築

ソフトウェアの開発プロセスの中で、定期的、自動的にビルド、テストを実施するようなCIパイプラインを構築します。

次に紹介するCIツールを使うのが一般的です。

### CIツール

具体的なツールに関してはご自身で調べて実施してみてください。

かなり普及しているプラクティスなので

ネット上にたくさんの情報があります。

例を挙げると

 * Jenkins
 * Travis
 * GitLab CI
 * CircleCI
 * TeamCity
 * Bamboo

などがあります。

### 失敗にすぐに気づけるようにする

失敗に気づけるようにしましょう。

失敗に気づくのが1週間後とかになってしまったら

それまで作ったものに不具合がないのかどうかが不明確になってしまいます。

CIの実行が終わった直後に気づけるようにしましょう。

最近のCIツールではメールやチャットなどに送ってくれるものもあります。

おすすめは常にディスプレイに表示しておいて、

失敗したら画面が真っ赤になったり、大きな音が出るなどをしておくことです。

また、場合によっては

 * 失敗した時には全員が手を止めて修正する

ようなルールを追加しても良いと思います。

CIを正常に保つ意識をチーム全員が持つことができます。

## 注意点

### CIツールを入れることが継続的インテグレーションをやっていることにはならない

「CIツールを入れること＝継続的インテグレーションができていること」にはなりません。

継続的インテグレーションはプラクティスであり、文化です。

失敗に気づいて、改善していくサイクルができないのであれば、

CIツールを入れてもあまり意味がなくなってしまいます。

### 開発を開始する前に継続的インテグレーションを準備する

理想ではありますが、

できれば開発を開始する前に継続的インテグレーションが実施できるようにしましょう。

なぜ継続的インテグレーションをするのかの部分でも書きましたが、

品質を作り込むことが大事になります。

### テストがなくても実施する

現状、テストが書かれていないアプリケーションであっても、

ビルドだけでもしておく価値はあります。

コードの修正により、ビルドができなくなるリスクを回避できます。

また、徐々にテストを増やしていくことで品質が向上していきます。

### 改善をする

CI自体の改善をしましょう。

普段手作業でやっているようなことを

自動化できないか考えてみましょう。

例えば、下記のような改善です。

 * テストが遅ければ失敗させて気づけるようにする
 * 静的解析に問題があれば失敗させて気づけるようにする
 * パフォーマンス、セキュリティ、障害など各種自動化されたテストを組み込み、品質を作り込む

## 参考資料
* [継続的デリバリー 信頼できるソフトウェアリリースのためのビルド・テスト・デプロイメントの自動化](https://www.amazon.co.jp/%E7%B6%99%E7%B6%9A%E7%9A%84%E3%83%87%E3%83%AA%E3%83%90%E3%83%AA%E3%83%BC-%E4%BF%A1%E9%A0%BC%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89%E3%83%BB%E3%83%86%E3%82%B9%E3%83%88%E3%83%BB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E8%87%AA%E5%8B%95%E5%8C%96-Jez-Humble/dp/4048930583/ref=pd_sbs_14_t_0/356-5753984-4112667?_encoding=UTF8&pd_rd_i=4048930583&pd_rd_r=35ce86eb-4923-4286-9d04-3ad993a7b2b9&pd_rd_w=OM58e&pd_rd_wg=69cpT&pf_rd_p=ca22fd73-0f1e-4b39-9917-c84a20b3f3a8&pf_rd_r=0BNMW8KJ6HRQ0AC5JN31&psc=1&refRID=0BNMW8KJ6HRQ0AC5JN31)

## さいごに

文章の改善のため、フィードバックがありましたら、[こちら](https://forms.gle/TKUJ2Gs9EoH2jQvp7)からお願いいたします。
